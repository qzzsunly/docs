<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>53.&nbsp;Metrics</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="production-ready.html" title="Part&nbsp;V.&nbsp;Spring Boot Actuator: Production-ready features"><link rel="prev" href="production-ready-loggers.html" title="52.&nbsp;Loggers"><link rel="next" href="production-ready-auditing.html" title="54.&nbsp;Auditing"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">53.&nbsp;Metrics</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="production-ready-loggers.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;V.&nbsp;Spring Boot Actuator: Production-ready features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="production-ready-auditing.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="production-ready-metrics" href="#production-ready-metrics"></a>53.&nbsp;Metrics</h2></div></div></div><p>Spring Boot Actuator provides dependency management and auto-configuration for
<a class="link" href="https://micrometer.io" target="_top">Micrometer</a>, an application metrics facade that supports numerous
monitoring systems:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="https://github.com/Netflix/atlas" target="_top">Atlas</a></li><li class="listitem"><a class="link" href="https://www.datadoghq.com" target="_top">Datadog</a></li><li class="listitem"><a class="link" href="http://ganglia.sourceforge.net" target="_top">Ganglia</a></li><li class="listitem"><a class="link" href="https://graphiteapp.org" target="_top">Graphite</a></li><li class="listitem"><a class="link" href="https://www.influxdata.com" target="_top">Influx</a></li><li class="listitem"><a class="link" href="https://prometheus.io" target="_top">Prometheus</a></li></ul></div><p>Micrometer provides a separate module for each supported monitoring system. Depending on
one (or more) of these modules is sufficient to get started with Micrometer in your
Spring Boot application. To learn more about Micrometer&#8217;s capabilities, please refer to
its <a class="link" href="https://micrometer.io/docs" target="_top">reference documentation</a>.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-metrics-spring-mvc" href="#production-ready-metrics-spring-mvc"></a>53.1&nbsp;Spring MVC metrics</h2></div></div></div><p>Auto-configuration will enable the instrumentation of requests handled by Spring MVC.
When <code class="literal">spring.metrics.web.server.auto-time-requests</code> is <code class="literal">true</code>, this instrumentation will
occur for all requests. Alternatively, when set to <code class="literal">false</code>, instrumentation can be enabled
by adding <code class="literal">@Timed</code> to a request-handling method.</p><p>Metrics will, by default, be generated with the name <code class="literal">http.server.requests</code>. The name
can be customized using the <code class="literal">spring.metrics.web.server.requests-metrics-name</code> property.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-metrics-spring-mvc-tags" href="#production-ready-metrics-spring-mvc-tags"></a>53.1.1&nbsp;Spring MVC metric tags</h3></div></div></div><p>Spring MVC-related metrics will, by default, be tagged with the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Request&#8217;s method,</li><li class="listitem">Request&#8217;s URI (templated if possible)</li><li class="listitem">Simple class name of any exception that was thrown while handling the request</li><li class="listitem">Response&#8217;s status</li></ul></div><p>To customize the tags, provide a <code class="literal">@Bean</code> that implements <code class="literal">WebMvcTagsProvider</code>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-metrics-web-flux" href="#production-ready-metrics-web-flux"></a>53.2&nbsp;WebFlux metrics</h2></div></div></div><p>Auto-configuration will enable the instrumentation of all requests handled by WebFlux
controllers. A helper class, <code class="literal">RouterFunctionMetrics</code>, is also provided that can be
used to instrument applications using WebFlux&#8217;s functional programming model.</p><p>Metrics will, by default, be generated with the name <code class="literal">http.server.requests</code>. The name
can be customized using the <code class="literal">spring.metrics.web.server.requests-metrics-name</code> property.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-metrics-web-flux-tags" href="#production-ready-metrics-web-flux-tags"></a>53.2.1&nbsp;WebFlux metric tags</h3></div></div></div><p>WebFlux-related metrics for the annotation-based programming model will, by default,
be tagged with the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Request&#8217;s method,</li><li class="listitem">Request&#8217;s URI (templated if possible)</li><li class="listitem">Simple class name of any exception that was thrown while handling the request</li><li class="listitem">Response&#8217;s status</li></ul></div><p>To customize the tags, provide a <code class="literal">@Bean</code> that implements <code class="literal">WebFluxTagsProvider</code>.</p><p>Metrics for the functional programming model will, by default, be tagged with the
following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Request&#8217;s method,</li><li class="listitem">Request&#8217;s URI (templated if possible)</li><li class="listitem">Response&#8217;s status</li></ul></div><p>To customize the tags, use the <code class="literal">defaultTags</code> method on the <code class="literal">RouterFunctionMetrics</code>
instance that you are using.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-metrics-rest-template" href="#production-ready-metrics-rest-template"></a>53.3&nbsp;RestTemplate metrics</h2></div></div></div><p>Auto-configuration will customize the auto-configured <code class="literal">RestTemplate</code> to enable the
instrumentation of its requests. <code class="literal">MetricsRestTemplateCustomizer</code> can be used to
customize your own <code class="literal">RestTemplate</code> instances.</p><p>Metrics will, by default, be generated with the name <code class="literal">http.client.requests</code>. The name
can be customized using the <code class="literal">spring.metrics.web.client.requests-metrics-name</code> property.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-metrics-rest-template-tags" href="#production-ready-metrics-rest-template-tags"></a>53.3.1&nbsp;RestTemplate metric tags</h3></div></div></div><p>Metrics generated by an instrumented <code class="literal">RestTemplate</code> will, by default, be tagged with
the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Request&#8217;s method</li><li class="listitem">Request&#8217;s URI (templated if possible)</li><li class="listitem">Response&#8217;s status</li><li class="listitem">Request URI&#8217;s host</li></ul></div><p><a name="production-ready-metrics-integration" href="#production-ready-metrics-integration"></a>Auto-configuration will enable binding of a number of Spring Integration-related
metrics:</p><div class="table"><a name="d0e13686" href="#d0e13686"></a><p class="title"><b>Table&nbsp;53.1.&nbsp;General metrics</b></p><div class="table-contents"><table class="table" summary="General metrics" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Metric</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.channelNames</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Number of Spring Integration channels</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.handlerNames</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Number of Spring Integration handlers</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.sourceNames</code></p></td><td style="" align="left" valign="top"><p>Number of Spring Integration sources</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="d0e13723" href="#d0e13723"></a><p class="title"><b>Table&nbsp;53.2.&nbsp;Channel metrics</b></p><div class="table-contents"><table class="table" summary="Channel metrics" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Metric</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.channel.receives</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Number of receives</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.channel.sendErrors</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Number of failed sends</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.channel.sends</code></p></td><td style="" align="left" valign="top"><p>Number of successful sends</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="d0e13760" href="#d0e13760"></a><p class="title"><b>Table&nbsp;53.3.&nbsp;Handler metrics</b></p><div class="table-contents"><table class="table" summary="Handler metrics" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Metric</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.handler.duration.max</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Maximum handler duration in milliseconds</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.handler.duration.min</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Minimum handler duration in milliseconds</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.handler.duration.mean</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Mean handler duration in milliseconds</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.handler.activeCount</code></p></td><td style="" align="left" valign="top"><p>Number of active handlers</p></td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="d0e13805" href="#d0e13805"></a><p class="title"><b>Table&nbsp;53.4.&nbsp;Source metrics</b></p><div class="table-contents"><table class="table" summary="Source metrics" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Metric</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">spring.integration.source.messages</code></p></td><td style="" align="left" valign="top"><p>Number of successful source calls</p></td></tr></tbody></table></div></div><br class="table-break"></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="production-ready-loggers.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="production-ready.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="production-ready-auditing.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">52.&nbsp;Loggers&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;54.&nbsp;Auditing</td></tr></table></div></body></html>