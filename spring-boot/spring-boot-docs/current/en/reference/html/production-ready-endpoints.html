<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>49.&nbsp;Endpoints</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="production-ready.html" title="Part&nbsp;V.&nbsp;Spring Boot Actuator: Production-ready features"><link rel="prev" href="production-ready-enabling.html" title="48.&nbsp;Enabling production-ready features"><link rel="next" href="production-ready-monitoring.html" title="50.&nbsp;Monitoring and management over HTTP"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">49.&nbsp;Endpoints</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="production-ready-enabling.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;V.&nbsp;Spring Boot Actuator: Production-ready features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="production-ready-monitoring.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="production-ready-endpoints" href="#production-ready-endpoints"></a>49.&nbsp;Endpoints</h2></div></div></div><p>Actuator endpoints allow you to monitor and interact with your application. Spring Boot
includes a number of built-in endpoints and you can also add your own. For example the
<code class="literal">health</code> endpoint provides basic application health information.</p><p>The way that endpoints are exposed will depend on the type of technology that you choose.
Most applications choose HTTP monitoring, where the ID of the endpoint along with a prefix of
<code class="literal">/application</code> is mapped to a URL. For example, by default, the <code class="literal">health</code> endpoint will be mapped
to <code class="literal">/application/health</code>.</p><p>The following technology agnostic endpoints are available:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">ID</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">auditevents</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Exposes audit events information for the current application.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">autoconfig</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Displays an auto-configuration report showing all auto-configuration candidates and the
 reason why they &#8216;were&#8217; or &#8216;were not&#8217; applied.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">beans</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Displays a complete list of all the Spring beans in your application.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">configprops</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Displays a collated list of all <code class="literal">@ConfigurationProperties</code>.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">env</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Exposes properties from Spring&#8217;s <code class="literal">ConfigurableEnvironment</code>.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">flyway</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Shows any Flyway database migrations that have been applied.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">health</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Shows application health information.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">info</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Displays arbitrary application info.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">loggers</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Shows and modifies the configuration of loggers in the application.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">liquibase</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Shows any Liquibase database migrations that have been applied.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">metrics</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Shows &#8216;metrics&#8217; information for the current application.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">mappings</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Displays a collated list of all <code class="literal">@RequestMapping</code> paths.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">sessions</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Allows retrieval and deletion of user&#8217;s sessions from Spring Session backed session
 store.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">shutdown</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Allows the application to be gracefully shutdown (not enabled by default).</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">status</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Show application status information (i.e. <code class="literal">health</code> status with no additional details).</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">threaddump</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Performs a thread dump.</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">trace</code></p></td><td style="" align="left" valign="top"><p>Displays trace information (by default the last 100 HTTP requests).</p></td></tr></tbody></table></div><p>If your application is a web application (Spring MVC, Spring WebFlux, or Jersey), the
following additional endpoints can also be used:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">ID</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">heapdump</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Returns a GZip compressed <code class="literal">hprof</code> heap dump file.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logfile</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Returns the contents of the logfile (if <code class="literal">logging.file</code> or <code class="literal">logging.path</code> properties have
been set). Supports the use of the HTTP <code class="literal">Range</code> header to retrieve part of the log file&#8217;s
content.</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">prometheus</code></p></td><td style="" align="left" valign="top"><p>Exposes metrics in a format that can be scraped by a Prometheus server.</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-endpoints-security" href="#production-ready-endpoints-security"></a>49.1&nbsp;Securing endpoints</h2></div></div></div><p>By default all HTTP endpoints are secured such that only users that have an <code class="literal">ACTUATOR</code>
role may access them. Security is enforced using the standard
<code class="literal">HttpServletRequest.isUserInRole</code> method.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>Use the <code class="literal">management.security.roles</code> property if you want something different to
<code class="literal">ACTUATOR</code>.</p></td></tr></table></div><p>If you are deploying applications behind a firewall, you may prefer that all your actuator
endpoints can be accessed without requiring authentication. You can do this by changing
the <code class="literal">management.security.enabled</code> property:</p><p><b>application.properties.&nbsp;</b>
</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.security.enabled</span>=false</pre><p>
</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>By default, actuator endpoints are exposed on the same port that serves regular
HTTP traffic. Take care not to accidentally expose sensitive information if you change
the <code class="literal">management.security.enabled</code> property.</p></td></tr></table></div><p>If you&#8217;re deploying applications publicly, you may want to add &#8216;Spring Security&#8217; to
handle user authentication. When &#8216;Spring Security&#8217; is added, by default &#8216;basic&#8217;
authentication will be used with the username <code class="literal">user</code> and a generated password (which is
printed on the console when the application starts).</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>Generated passwords are logged as the application starts. Search for &#8216;Using default
security password&#8217;.</p></td></tr></table></div><p>You can use Spring properties to change the username and password and to change the
security role(s) required to access the endpoints. For example, you might set the following
in your <code class="literal">application.properties</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">security.user.name</span>=admin
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">security.user.password</span>=secret
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.security.roles</span>=SUPERUSER</pre><p>If your application has custom security configuration and you want all your actuator
endpoints to be accessible without authentication, you need to explicitly configure that
in your security configuration. Along with that, you need to change the
<code class="literal">management.security.enabled</code> property to <code class="literal">false</code>.</p><p>If your custom security configuration secures your actuator endpoints, you also need to
ensure that the authenticated user has the roles specified under
<code class="literal">management.security.roles</code>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you don&#8217;t have a use case for exposing basic health information to unauthenticated
users, and you have secured the actuator endpoints with custom security, you can set
<code class="literal">management.security.enabled</code> to <code class="literal">false</code>. This will inform Spring Boot to skip the
additional role check.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-customizing-endpoints" href="#production-ready-customizing-endpoints"></a>49.2&nbsp;Customizing endpoints</h2></div></div></div><p>Endpoints can be customized using Spring properties. You can change if an endpoint is
<code class="literal">enabled</code> and its <code class="literal">id</code>.</p><p>For example, here is an <code class="literal">application.properties</code> that changes the id of the <code class="literal">beans</code>
endpoint and also enables <code class="literal">shutdown</code>.</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">endpoints.beans.id</span>=springbeans
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">endpoints.shutdown.enabled</span>=true</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The prefix &#8223;<code class="literal">endpoints</code> + <code class="literal">.</code> + <code class="literal">name</code>&#8221; is used to uniquely identify the endpoint
that is being configured.</p></td></tr></table></div><p>By default, all endpoints except for <code class="literal">shutdown</code> are enabled. If you prefer to
specifically &#8220;opt-in&#8221; endpoint enablement you can use the <code class="literal">endpoints.default.enabled</code>
property. For example, the following will disable <span class="emphasis"><em>all</em></span> endpoints except for <code class="literal">info</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">endpoints.default.enabled</span>=false
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">endpoints.info.enabled</span>=true</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-endpoint-hypermedia" href="#production-ready-endpoint-hypermedia"></a>49.3&nbsp;Hypermedia for actuator web endpoints</h2></div></div></div><p>A &#8220;discovery page&#8221; is added with links to all the endpoints. The &#8220;discovery page&#8221; is
available on <code class="literal">/application</code> by default.</p><p>When a custom management context path is configured, the &#8220;discovery page&#8221; will
automatically move from <code class="literal">/application</code> to the root of the management context. For example,
if the management context path is <code class="literal">/management</code> then the discovery page will be available
from <code class="literal">/management</code>. When the management context path is set to <code class="literal">/</code> the discovery page
is disabled to prevent the possibility of a clash with other mappings.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-endpoint-cors" href="#production-ready-endpoint-cors"></a>49.4&nbsp;CORS support</h2></div></div></div><p><a class="link" href="http://en.wikipedia.org/wiki/Cross-origin_resource_sharing" target="_top">Cross-origin resource sharing</a>
(CORS) is a <a class="link" href="http://www.w3.org/TR/cors/" target="_top">W3C specification</a> that allows you to specify in a
flexible way what kind of cross domain requests are authorized. If you are using Spring
MVC or Spring WebFlux, Actuator&#8217;s web endpoints can be configured to support such
scenarios.</p><p>CORS support is disabled by default and is only enabled once the
<code class="literal">management.endpoints.cors.allowed-origins</code> property has been set. The configuration below
permits <code class="literal">GET</code> and <code class="literal">POST</code> calls from the <code class="literal">example.com</code> domain:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.endpoints.cors.allowed-origins</span>=http://example.com
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.endpoints.cors.allowed-methods</span>=GET,POST</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>Check <a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/autoconfigure/endpoint/infrastructure/CorsEndpointProperties.java" target="_top">CorsEndpointProperties</a>
for a complete list of options.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-customizing-endpoints-programmatically" href="#production-ready-customizing-endpoints-programmatically"></a>49.5&nbsp;Adding custom endpoints</h2></div></div></div><p>If you add a <code class="literal">@Bean</code> annotated with <code class="literal">@Endpoint</code>, any methods annotated with
<code class="literal">@ReadOperation</code> or <code class="literal">@WriteOperation</code> will automatically be exposed over JMX and, in a web
application, over HTTP as well.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you are doing this as a library feature consider adding a configuration class
annotated with <code class="literal">@ManagementContextConfiguration</code> to <code class="literal">/META-INF/spring.factories</code> under the
key <code class="literal">org.springframework.boot.actuate.autoconfigure.ManagementContextConfiguration</code>. If
you do that then the endpoint will move to a child context with all the other web
endpoints endpoints if your users ask for a separate management port or address.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-health" href="#production-ready-health"></a>49.6&nbsp;Health information</h2></div></div></div><p>Health information can be used to check the status of your running application. It is
often used by monitoring software to alert someone if a production system goes down.
The default information exposed by the <code class="literal">health</code> endpoint depends on how it is accessed.
For an unauthenticated connection in a secure application a simple &#8216;status&#8217; message is
returned, and for an authenticated connection additional details are also displayed (see
<a class="xref" href="production-ready-monitoring.html#production-ready-health-access-restrictions" title="50.6&nbsp;HTTP health endpoint format and access restrictions">Section&nbsp;50.6, &#8220;HTTP health endpoint format and access restrictions&#8221;</a> for HTTP details).</p><p>Health information is collected from all
<a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/HealthIndicator.java" target="_top"><code class="literal">HealthIndicator</code></a> beans defined
in your <code class="literal">ApplicationContext</code>. Spring Boot includes a number of auto-configured
<code class="literal">HealthIndicators</code> and you can also write your own. By default, the final system state is
derived by the <code class="literal">HealthAggregator</code> which sorts the statuses from each <code class="literal">HealthIndicator</code>
based on an ordered list of statuses. The first status in the sorted list is used as the
overall health status. If no <code class="literal">HealthIndicator</code> returns a status that is known to the
<code class="literal">HealthAggregator</code>, an <code class="literal">UNKNOWN</code> status is used.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_auto_configured_healthindicators" href="#_auto_configured_healthindicators"></a>49.6.1&nbsp;Auto-configured HealthIndicators</h3></div></div></div><p>The following <code class="literal">HealthIndicators</code> are auto-configured by Spring Boot when appropriate:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Name</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/CassandraHealthIndicator.java" target="_top"><code class="literal">CassandraHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that a Cassandra database is up.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/DiskSpaceHealthIndicator.java" target="_top"><code class="literal">DiskSpaceHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks for low disk space.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/DataSourceHealthIndicator.java" target="_top"><code class="literal">DataSourceHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that a connection to <code class="literal">DataSource</code> can be obtained.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/ElasticsearchHealthIndicator.java" target="_top"><code class="literal">ElasticsearchHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that an Elasticsearch cluster is up.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/JmsHealthIndicator.java" target="_top"><code class="literal">JmsHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that a JMS broker is up.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/MailHealthIndicator.java" target="_top"><code class="literal">MailHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that a mail server is up.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/MongoHealthIndicator.java" target="_top"><code class="literal">MongoHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that a Mongo database is up.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/RabbitHealthIndicator.java" target="_top"><code class="literal">RabbitHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that a Rabbit server is up.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/RedisHealthIndicator.java" target="_top"><code class="literal">RedisHealthIndicator</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Checks that a Redis server is up.</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/SolrHealthIndicator.java" target="_top"><code class="literal">SolrHealthIndicator</code></a></p></td><td style="" align="left" valign="top"><p>Checks that a Solr server is up.</p></td></tr></tbody></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>It is possible to disable them all using the <code class="literal">management.health.defaults.enabled</code>
property.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_writing_custom_healthindicators" href="#_writing_custom_healthindicators"></a>49.6.2&nbsp;Writing custom HealthIndicators</h3></div></div></div><p>To provide custom health information you can register Spring beans that implement the
<a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/HealthIndicator.java" target="_top"><code class="literal">HealthIndicator</code></a> interface.
You need to provide an implementation of the <code class="literal">health()</code> method and return a <code class="literal">Health</code>
response. The <code class="literal">Health</code> response should include a status and can optionally include
additional details to be displayed.</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.boot.actuate.health.Health;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.boot.actuate.health.HealthIndicator;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.stereotype.Component;

<em><span class="hl-annotation" style="color: gray">@Component</span></em>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyHealthIndicator <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">implements</span> HealthIndicator {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> Health health() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">int</span> errorCode = check(); <span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// perform some specific health check</span>
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">if</span> (errorCode != <span class="hl-number">0</span>) {
			<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> Health.down().withDetail(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"Error Code"</span>, errorCode).build();
		}
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> Health.up().build();
	}

}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The identifier for a given <code class="literal">HealthIndicator</code> is the name of the bean without the
<code class="literal">HealthIndicator</code> suffix if it exists. In the example above, the health information will
be available in an entry named <code class="literal">my</code>.</p></td></tr></table></div><p>In addition to Spring Boot&#8217;s predefined <a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/Status.java" target="_top"><code class="literal">Status</code></a>
types, it is also possible for <code class="literal">Health</code> to return a custom <code class="literal">Status</code> that represents a
new system state. In such cases a custom implementation of the
<a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/HealthAggregator.java" target="_top"><code class="literal">HealthAggregator</code></a>
interface also needs to be provided, or the default implementation has to be configured
using the <code class="literal">management.health.status.order</code> configuration property.</p><p>For example, assuming a new <code class="literal">Status</code> with code <code class="literal">FATAL</code> is being used in one of your
<code class="literal">HealthIndicator</code> implementations. To configure the severity order add the following
to your application properties:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.health.status.order</span>=FATAL, DOWN, OUT_OF_SERVICE, UNKNOWN, UP</pre><p>The HTTP status code in the response reflects the overall health status (e.g. <code class="literal">UP</code>
maps to 200, <code class="literal">OUT_OF_SERVICE</code> or <code class="literal">DOWN</code> to 503). You might also want to register custom
status mappings if you access the health endpoint over HTTP. For example, the following
maps <code class="literal">FATAL</code> to 503 (service unavailable).</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.health.status.http-mapping.FATAL</span>=503</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you need more control you can define your own <code class="literal">HealthStatusHttpMapper</code> bean.</p></td></tr></table></div><p>The default status mappings for the built-in statuses are:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Status</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Mapping</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>DOWN</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>SERVICE_UNAVAILABLE (503)</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>OUT_OF_SERVICE</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>SERVICE_UNAVAILABLE (503)</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>UP</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>No mapping by default, so http status is 200</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p>UNKNOWN</p></td><td style="" align="left" valign="top"><p>No mapping by default, so http status is 200</p></td></tr></tbody></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-application-info" href="#production-ready-application-info"></a>49.7&nbsp;Application information</h2></div></div></div><p>Application information exposes various information collected from all
<a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/InfoContributor.java" target="_top"><code class="literal">InfoContributor</code></a> beans defined
in your <code class="literal">ApplicationContext</code>. Spring Boot includes a number of auto-configured
<code class="literal">InfoContributors</code> and you can also write your own.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-application-info-autoconfigure" href="#production-ready-application-info-autoconfigure"></a>49.7.1&nbsp;Auto-configured InfoContributors</h3></div></div></div><p>The following <code class="literal">InfoContributors</code> are auto-configured by Spring Boot when appropriate:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Name</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/EnvironmentInfoContributor.java" target="_top"><code class="literal">EnvironmentInfoContributor</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Expose any key from the <code class="literal">Environment</code> under the <code class="literal">info</code> key.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/GitInfoContributor.java" target="_top"><code class="literal">GitInfoContributor</code></a></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Expose git information if a <code class="literal">git.properties</code> file is available.</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/BuildInfoContributor.java" target="_top"><code class="literal">BuildInfoContributor</code></a></p></td><td style="" align="left" valign="top"><p>Expose build information if a <code class="literal">META-INF/build-info.properties</code> file is available.</p></td></tr></tbody></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>It is possible to disable them all using the <code class="literal">management.info.defaults.enabled</code>
property.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-application-info-env" href="#production-ready-application-info-env"></a>49.7.2&nbsp;Custom application info information</h3></div></div></div><p>You can customize the data exposed by the <code class="literal">info</code> endpoint by setting <code class="literal">info.*</code> Spring
properties. All <code class="literal">Environment</code> properties under the info key will be automatically
exposed. For example, you could add the following to your <code class="literal">application.properties</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">info.app.encoding</span>=UTF-8
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">info.app.java.source</span>=1.8
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">info.app.java.target</span>=1.8</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>Rather than hardcoding those values you could also
<a class="link" href="howto-properties-and-configuration.html#howto-automatic-expansion" title="73.1&nbsp;Automatically expand properties at build time">expand info properties at build time</a>.</p><p>Assuming you are using Maven, you could rewrite the example above as follows:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">info.app.encoding</span>=@project.build.sourceEncoding@
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">info.app.java.source</span>=@java.version@
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">info.app.java.target</span>=@java.version@</pre></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-application-info-git" href="#production-ready-application-info-git"></a>49.7.3&nbsp;Git commit information</h3></div></div></div><p>Another useful feature of the <code class="literal">info</code> endpoint is its ability to publish information
about the state of your <code class="literal">git</code> source code repository when the project was built. If a
<code class="literal">GitProperties</code> bean is available, the <code class="literal">git.branch</code>, <code class="literal">git.commit.id</code> and
<code class="literal">git.commit.time</code> properties will be exposed.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>A <code class="literal">GitProperties</code> bean is auto-configured if a <code class="literal">git.properties</code> file is available
at the root of the classpath. See
<a class="link" href="howto-build.html#howto-git-info" title="85.2&nbsp;Generate git information">Generate git information</a> for more details.</p></td></tr></table></div><p>If you want to display the full git information (i.e. the full content of
<code class="literal">git.properties</code>), use the <code class="literal">management.info.git.mode</code> property:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.info.git.mode</span>=full</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-application-info-build" href="#production-ready-application-info-build"></a>49.7.4&nbsp;Build information</h3></div></div></div><p>The <code class="literal">info</code> endpoint can also publish information about your build if a <code class="literal">BuildProperties</code>
bean is available. This happens if a <code class="literal">META-INF/build-info.properties</code> file is available
in the classpath.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>The Maven and Gradle plugins can both generate that file, see
<a class="link" href="howto-build.html#howto-build-info" title="85.1&nbsp;Generate build information">Generate build information</a> for more details.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="production-ready-application-info-custom" href="#production-ready-application-info-custom"></a>49.7.5&nbsp;Writing custom InfoContributors</h3></div></div></div><p>To provide custom application information you can register Spring beans that implement
the <a class="link" href="https://github.com/spring-projects/spring-boot/tree/master/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/info/InfoContributor.java" target="_top"><code class="literal">InfoContributor</code></a> interface.</p><p>The example below contributes an <code class="literal">example</code> entry with a single value:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> java.util.Collections;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.boot.actuate.info.Info;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.boot.actuate.info.InfoContributor;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.stereotype.Component;

<em><span class="hl-annotation" style="color: gray">@Component</span></em>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> ExampleInfoContributor <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">implements</span> InfoContributor {

	<em><span class="hl-annotation" style="color: gray">@Override</span></em>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> contribute(Info.Builder builder) {
		builder.withDetail(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"example"</span>,
				Collections.singletonMap(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"key"</span>, <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"value"</span>));
	}

}</pre><p>If you hit the <code class="literal">info</code> endpoint you should see a response that contains the following
additional entry:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">{</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"example"</span>: <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">{</span>
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"key"</span> : <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"value"</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">}</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">}</span></pre></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="production-ready-enabling.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="production-ready.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="production-ready-monitoring.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">48.&nbsp;Enabling production-ready features&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;50.&nbsp;Monitoring and management over HTTP</td></tr></table></div></body></html>