<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>34.&nbsp;Calling REST services with &#8216;WebClient&#8217;</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="boot-features.html" title="Part&nbsp;IV.&nbsp;Spring Boot features"><link rel="prev" href="boot-features-resttemplate.html" title="33.&nbsp;Calling REST services with &#8216;RestTemplate&#8217;"><link rel="next" href="boot-features-validation.html" title="35.&nbsp;Validation"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">34.&nbsp;Calling REST services with &#8216;WebClient&#8217;</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-features-resttemplate.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Boot features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="boot-features-validation.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="boot-features-webclient" href="#boot-features-webclient"></a>34.&nbsp;Calling REST services with &#8216;WebClient&#8217;</h2></div></div></div><p>If you have Spring WebFlux on your classpath, you can also choose to use <code class="literal">WebClient</code>
to call remote REST services; compared to <code class="literal">RestTemplate</code>, this client has more a
functional feel to it and is fully reactive. You can create your own client
instance with the builder <code class="literal">WebClient.create()</code>, which already provides a good
out-of-the-box experience. See the
<a class="link" href="http://docs.spring.io/spring/docs/5.0.1.BUILD-SNAPSHOT/spring-framework-reference/web.html#web-reactive-client" target="_top">relevant section on WebClient</a>.</p><p>Spring Boot will create and pre-configure such a builder for you; for example,
client HTTP codecs will be configured just like the server ones
(see <a class="link" href="boot-features-developing-web-applications.html#boot-features-spring-webflux-httpcodecs" title="27.2.2&nbsp;HTTP codecs with HttpMessageReaders and HttpMessageWriters">WebFlux HTTP codecs auto-configuration</a>).</p><p>Here&#8217;s a typical example:</p><pre class="programlisting"><em><span class="hl-annotation" style="color: gray">@Service</span></em>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyService {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> WebClient webClient;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(WebClient.Builder webClientBuilder) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.webClient = webClientBuilder.baseUrl(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"http://example.org"</span>).build();
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> Mono&lt;Details&gt; someRestCall(String name) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.webClient.get().url(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"/{name}/details"</span>, name)
						.retrieve().bodyToMono(Details.<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span>);
	}

}</pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-webclient-customization" href="#boot-features-webclient-customization"></a>34.1&nbsp;WebClient customization</h2></div></div></div><p>There are three main approaches to <code class="literal">WebClient</code> customization, depending on how broadly
you want the customizations to apply.</p><p>To make the scope of any customizations as narrow as possible, inject the auto-configured
<code class="literal">WebClient.Builder</code> and then call its methods as required. <code class="literal">WebClient.Builder</code> instances
are stateful; any change on the builder will be reflected in all clients subsequently
created with it. If you&#8217;d like to create several clients with the same builder, you can
also consider cloning the builder with <code class="literal">WebClient.Builder other = builder.clone();</code>.</p><p>To make an application-wide, additive customization to all <code class="literal">WebClient.Builder</code> instances,
you can declare <code class="literal">WebClientCustomizer</code> beans and change the <code class="literal">WebClient.Builder</code> as you
would do locally at the point of injection.</p><p>Lastly, you can fall back to the original API and just use <code class="literal">WebClient.create()</code>. In that
case, no auto-configuration nor <code class="literal">WebClientCustomizer</code> will be applied.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-features-resttemplate.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="boot-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="boot-features-validation.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">33.&nbsp;Calling REST services with &#8216;RestTemplate&#8217;&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;35.&nbsp;Validation</td></tr></table></div></body></html>