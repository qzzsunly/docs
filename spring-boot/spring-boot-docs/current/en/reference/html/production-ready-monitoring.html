<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>50.&nbsp;Monitoring and management over HTTP</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="production-ready.html" title="Part&nbsp;V.&nbsp;Spring Boot Actuator: Production-ready features"><link rel="prev" href="production-ready-endpoints.html" title="49.&nbsp;Endpoints"><link rel="next" href="production-ready-jmx.html" title="51.&nbsp;Monitoring and management over JMX"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">50.&nbsp;Monitoring and management over HTTP</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="production-ready-endpoints.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;V.&nbsp;Spring Boot Actuator: Production-ready features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="production-ready-jmx.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="production-ready-monitoring" href="#production-ready-monitoring"></a>50.&nbsp;Monitoring and management over HTTP</h2></div></div></div><p>If you are developing a Spring MVC application, Spring Boot Actuator will auto-configure
all enabled endpoints to be exposed over HTTP. The default convention is to use the
<code class="literal">id</code> of the endpoint with a prefix of <code class="literal">/application</code> as the URL path. For example, <code class="literal">health</code>
is exposed as <code class="literal">/application/health</code>.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-customizing-management-server-context-path" href="#production-ready-customizing-management-server-context-path"></a>50.1&nbsp;Customizing the management endpoint paths</h2></div></div></div><p>Sometimes it is useful to customize the prefix for the management endpoints.
For example, your application might already use <code class="literal">/application</code> for another purpose.
You can use the <code class="literal">management.context-path</code> property to change the prefix for your
management endpoint:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.context-path</span>=/manage</pre><p>The <code class="literal">application.properties</code> example above will change the endpoint from <code class="literal">/application/{id}</code> to
<code class="literal">/manage/{id}</code> (e.g. <code class="literal">/manage/info</code>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Unless the management port has been configured to
<a class="link" href="production-ready-monitoring.html#production-ready-customizing-management-server-port" title="50.2&nbsp;Customizing the management server port">expose endpoints using a different
HTTP port</a>, <code class="literal">management.context-path</code> is relative to <code class="literal">server.context-path</code>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-customizing-management-server-port" href="#production-ready-customizing-management-server-port"></a>50.2&nbsp;Customizing the management server port</h2></div></div></div><p>Exposing management endpoints using the default HTTP port is a sensible choice for cloud
based deployments. If, however, your application runs inside your own data center you
may prefer to expose endpoints using a different HTTP port.</p><p>The <code class="literal">management.port</code> property can be used to change the HTTP port.</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.port</span>=8081</pre><p>Since your management port is often protected by a firewall, and not exposed to the public
you might not need security on the management endpoints, even if your main application is
secure. In that case you will have Spring Security on the classpath, and you can disable
management security like this:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.security.enabled</span>=false</pre><p>(If you don&#8217;t have Spring Security on the classpath then there is no need to explicitly
disable the management security in this way, and it might even break the application.)</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-management-specific-ssl" href="#production-ready-management-specific-ssl"></a>50.3&nbsp;Configuring management-specific SSL</h2></div></div></div><p>When configured to use a custom port, the management server can also be configured with
its own SSL using the various <code class="literal">management.ssl.*</code> properties. For example, this allows a
management server to be available via HTTP while the main application uses HTTPS:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.port</span>=8443
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.ssl.enabled</span>=true
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.ssl.key-store</span>=classpath:store.jks
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.ssl.key-password</span>=secret
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.port</span>=8080
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.ssl.enabled</span>=false</pre><p>Alternatively, both the main server and the management server can use SSL but with
different key stores:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.port</span>=8443
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.ssl.enabled</span>=true
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.ssl.key-store</span>=classpath:main.jks
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server.ssl.key-password</span>=secret
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.port</span>=8080
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.ssl.enabled</span>=true
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.ssl.key-store</span>=classpath:management.jks
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.ssl.key-password</span>=secret</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-customizing-management-server-address" href="#production-ready-customizing-management-server-address"></a>50.4&nbsp;Customizing the management server address</h2></div></div></div><p>You can customize the address that the management endpoints are available on by
setting the <code class="literal">management.address</code> property. This can be useful if you want to
listen only on an internal or ops-facing network, or to only listen for connections from
<code class="literal">localhost</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can only listen on a different address if the port is different to the
main server port.</p></td></tr></table></div><p>Here is an example <code class="literal">application.properties</code> that will not allow remote management
connections:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.port</span>=8081
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.address</span>=127.0.0.1</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-disabling-http-endpoints" href="#production-ready-disabling-http-endpoints"></a>50.5&nbsp;Disabling HTTP endpoints</h2></div></div></div><p>If you don&#8217;t want to expose endpoints over HTTP you can set the management port to <code class="literal">-1</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">management.port</span>=-1</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="production-ready-health-access-restrictions" href="#production-ready-health-access-restrictions"></a>50.6&nbsp;HTTP health endpoint format and access restrictions</h2></div></div></div><p>The information exposed by the health endpoint varies depending on whether or not it&#8217;s
accessed anonymously, and whether or not the enclosing application is secure.
By default, when accessed anonymously in a secure application, any details about the
server&#8217;s health are hidden and the endpoint will simply indicate whether or not the server
is up or down.</p><p>Sample summarized HTTP response (default for anonymous request):</p><pre class="screen">$ curl -i localhost:8080/health
HTTP/1.1 200
X-Application-Context: application
Content-Type: application/vnd.spring-boot.actuator.v2+json;charset=UTF-8
Content-Length: 15

{"status":"UP"}</pre><p>Sample summarized HTTP response for status "DOWN" (notice the 503 status code):</p><pre class="screen">$ curl -i localhost:8080/health
HTTP/1.1 503
X-Application-Context: application
Content-Type: application/vnd.spring-boot.actuator.v2+json;charset=UTF-8
Content-Length: 17

{"status":"DOWN"}</pre><p>Sample detailed HTTP response:</p><pre class="screen">$ curl -i localhost:8080/health
HTTP/1.1 200 OK
X-Application-Context: application
Content-Type: application/vnd.spring-boot.actuator.v2+json;charset=UTF-8
Content-Length: 221

{
  "status" : "UP",
  "diskSpace" : {
    "status" : "UP",
    "total" : 63251804160,
    "free" : 31316164608,
    "threshold" : 10485760
  },
  "db" : {
    "status" : "UP",
    "database" : "H2",
    "hello" : 1
  }
}</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="production-ready-endpoints.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="production-ready.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="production-ready-jmx.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">49.&nbsp;Endpoints&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;51.&nbsp;Monitoring and management over JMX</td></tr></table></div></body></html>